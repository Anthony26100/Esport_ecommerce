{% extends "base.html.twig" %}

{% block title %}
	Payez votre commande avec Stripe
{% endblock %}

{% block body %}
	<h1 class="text-center mb-5">Payez votre commande avec Stripe</h1>

	<form class="form_stripe" id="payment-form">
		<div class="shadow card_element_stripe" id="card-element"><!--Stripe.js injects the Payment Element--></div>
		<button id="submit" class="btn btn-info shadow rounded mt-2">
			<div class="spinner hidden" id="spinner"></div>
			<span id="button-text">Payer avec Stripe</span>
		</button>
		<p id="card-error" role="alert"></p>
	</form>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="https://js.stripe.com/v3/"></script>

	<script type="text/javascript">
		const clientSecret = "{{ clientSecret }}";
	</script>

	<script type="text/javascript">
		const stripePublicKey = "{{ stripePublicKey }}";
	</script>

	<script type="text/javascript">
		const redirectAfterSuccessUrl = "{{ url('purchase_payment_success', {'id': purchase.id}) }}";
	</script>

	<script src="{{ asset('assets/js/StripePaymentForm.js') }}"></script>
{% endblock %}
